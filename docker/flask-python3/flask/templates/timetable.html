{% extends "layout.html" %}
{% block content %}

<nav class="navbar navbar-toggleable-md navbar-inverse fixed-top bg-inverse">
  <a class="navbar-brand" href="#">toco ちゃんバス あと何分？</a>
</nav>

<div>&nbsp;</div>
<div>&nbsp;</div>
<div>&nbsp;</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-lg-12">

      <div id="block-station">
        <h3>
          {{ circuit.name }}循環 ({{ station.name }})
        </h3>

        {% if next_time_tables|length == 0 %}
          <h4><span>本日のバスは終了しました。</span></h4>
        {% else %}
          <div id="flickity">
            <ul class="js-flickity">
              {% for next_arrived_at in next_time_tables %}
              <li class="slide timetable" data-time="{{ next_arrived_at }}" style="background:{{ circuit.bgcolor }}"><span></span></li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
        <p><a href="/"><button type="button" class="btn btn-outline btn-lg btn-block">選択し直す</button></a></p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/static/js/jquery.countdown.min.js"></script>
<script type="text/javascript">
var timetables = $('li.timetable');
if (timetables[0]) {
  timetables.each(function() {
    var time = $(this).data('time');
    $(this).countdown(time, function(event) {
      $(this).children('span').text(
        event.strftime("%H h %M m %S s")
      );
    })
  });
}
</script>

{% endblock %}
